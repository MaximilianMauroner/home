---
const allBlogs = await Astro.glob("./blogs/*.mdx");
import BlogPreview from "@/components/BlogPreview.astro";
import DefaultLayout from "@/layouts/DefaultLayout.astro";
import { blogsFromMDX } from "@/utils/helpers";

const blogs = blogsFromMDX(allBlogs);
---

<DefaultLayout
  title="Blog"
  description="Trying to get my blog started so future historians can have my genius thoughts preserved for eternity /s"
>
  <section>
    <div class="mx-auto max-w-screen-xl px-4 py-8 lg:px-6 lg:py-16">
      <div class="mx-auto mb-8 max-w-screen-sm text-center lg:mb-16">
        <h2
          class="mb-4 text-3xl font-extrabold tracking-tight text-gray-900 lg:text-4xl"
        >
          My Blog
        </h2>
        <p class="l font-light text-gray-500 sm:text-xl">
          Trying to get my blog started so future historians can have my genius
          thoughts preserved for eternity /s
        </p>
      </div>
      <div class="grid gap-8 lg:grid-cols-2">
        {
          blogs
            .filter(
              (e) => e.published || process.env.NODE_ENV === "development"
            )
            .map((post) => <BlogPreview blog={post} />)
        }
      </div>
    </div>
  </section>
</DefaultLayout>
