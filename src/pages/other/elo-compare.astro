---
export const prerender = false;
import EloCompareGame from "@/components/other/EloCompareGame";
import { getSpotifyAuthorizationUrl } from "@/utils/spotify";
import StarLayout from "@/layouts/StarLayout.astro";
const authUrl = getSpotifyAuthorizationUrl();

const accessToken = Astro.cookies.get("spotify_access_token")?.value;
const currentPath = Astro.url.pathname;
---

<StarLayout title="Elo Compare" description="Compare Different Items in a list">
  <div class="mx-auto my-2 max-w-2xl rounded-lg bg-gray-100 p-6 shadow-lg">
    <div class="mb-4 flex items-center justify-between">
      {
        !accessToken ? (
          <a
            href={authUrl}
            class="rounded-lg bg-green-500 px-4 py-2 text-white hover:bg-green-600"
          >
            Sign In
          </a>
        ) : (
          <a
            href={`/api/spotify/signout?redirect_to=${encodeURIComponent(currentPath)}`}
            class="rounded-lg bg-red-500 px-4 py-2 text-white hover:bg-red-600"
          >
            Sign Out
          </a>
        )
      }
    </div>
    <EloCompareGame client:load />
  </div>
</StarLayout>
